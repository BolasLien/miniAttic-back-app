(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[18],{f3d3:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"products"}},[e("div",{staticClass:"q-pa-md"},[e("q-table",{attrs:{title:"商品列表",data:t.data,columns:t.columns,"row-key":"name"},scopedSlots:t._u([{key:"top",fn:function(){return[e("div",{staticClass:"text-h4"},[t._v("\n      商品列表\n    ")]),e("q-space"),e("q-btn",{attrs:{push:"",color:"positive",label:"新增商品"},on:{click:function(a){t.add=!0}}})]},proxy:!0},{key:"body",fn:function(a){return[e("q-tr",{attrs:{props:a}},[e("q-td",{key:"img",attrs:{props:a}},[e("q-img",{staticStyle:{width:"120px"},attrs:{src:a.row.src,ratio:4/3}})],1),e("q-td",{key:"upload",attrs:{props:a}},[e("q-file",{attrs:{color:"teal",filled:"",label:"選擇圖片",accept:".jpg",hint:"限.jpg, 1M以下"},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"cloud_upload"}})]},proxy:!0}],null,!0),model:{value:a.row.file,callback:function(e){t.$set(a.row,"file",e)},expression:"props.row.file"}}),e("q-btn",{attrs:{push:"",color:"primary",label:"上傳"},on:{click:function(e){return t.upload(a.row,"product")}}})],1),e("q-td",{key:"name",attrs:{props:a}},[e("div",{staticClass:"text-subtitle1 text-center"},[t._v("\n            "+t._s(a.row.name)+"\n            ")])]),e("q-td",{key:"class",attrs:{props:a}},[t.options.length>0?e("q-badge",{attrs:{color:"warning"}},[t._v("\n            "+t._s(t.options.find((function(t){return t.value===a.row.class})).label)+"\n          ")]):t._e()],1),e("q-td",{key:"price",attrs:{props:a}},[e("div",{staticClass:"text-negative"},[t._v("\n            NT$ "+t._s(a.row.price)+"\n            ")])]),e("q-td",{key:"show",attrs:{props:a}},[e("q-badge",{attrs:{color:a.row.show?"positive":"nagative"}},[t._v("\n            "+t._s(a.row.show)+"\n          ")])],1),e("q-td",{key:"action",attrs:{props:a}},[e("q-btn",{attrs:{push:"",color:"primary",label:"編輯內容"},on:{click:function(e){return t.editProduct(a.row)}}}),e("q-btn",{attrs:{push:"",color:"positive",label:"預覽"},on:{click:function(a){t.newProdouct=!0}}}),e("q-btn",{attrs:{push:"",color:"negative",label:"刪除"},on:{click:function(e){return t.remove(a.row)}}})],1)],1)]}}])})],1),e("q-dialog",{attrs:{persistent:""},model:{value:t.add,callback:function(a){t.add=a},expression:"add"}},[e("q-card",{staticStyle:{"min-width":"500px"}},[e("q-card-section",[e("div",{staticClass:"text-h6"},[t._v("新增商品")])]),e("q-card-section",{staticClass:"q-pt-none"},[e("q-input",{staticClass:"text",attrs:{outlined:"",placeholder:"商品名稱"},model:{value:t.addData.name,callback:function(a){t.$set(t.addData,"name",a)},expression:"addData.name"}}),e("q-select",{attrs:{outlined:"",options:t.options,"emit-value":!0,label:"分類"},model:{value:t.addData.class,callback:function(a){t.$set(t.addData,"class",a)},expression:"addData.class"}}),e("q-input",{staticClass:"text",attrs:{outlined:"",placeholder:"副標題"},model:{value:t.addData.subheading,callback:function(a){t.$set(t.addData,"subheading",a)},expression:"addData.subheading"}}),e("q-input",{staticClass:"text",attrs:{outlined:"",placeholder:"簡述"},model:{value:t.addData.intro,callback:function(a){t.$set(t.addData,"intro",a)},expression:"addData.intro"}}),e("q-input",{staticClass:"text",attrs:{prefix:"$",outlined:"",placeholder:"價格"},model:{value:t.addData.price,callback:function(a){t.$set(t.addData,"price",a)},expression:"addData.price"}}),e("q-input",{staticClass:"text",attrs:{type:"textarea",outlined:"",placeholder:"介紹"},model:{value:t.addData.description,callback:function(a){t.$set(t.addData,"description",a)},expression:"addData.description"}}),e("q-toggle",{attrs:{"checked-icon":"check",color:"green","unchecked-icon":"clear",label:"是否上架"},model:{value:t.addData.show,callback:function(a){t.$set(t.addData,"show",a)},expression:"addData.show"}})],1),e("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"取消"}}),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"送出"},on:{click:function(a){return t.create(t.addData)}}})],1)],1)],1),e("q-dialog",{attrs:{persistent:""},model:{value:t.edit,callback:function(a){t.edit=a},expression:"edit"}},[e("q-card",{staticStyle:{"min-width":"500px"}},[e("q-card-section",[e("div",{staticClass:"text-h6"},[t._v("商品編輯")])]),e("q-card-section",{staticClass:"q-pt-none"},[e("q-input",{staticClass:"text",attrs:{outlined:"",placeholder:"商品名稱"},model:{value:t.editData.name,callback:function(a){t.$set(t.editData,"name",a)},expression:"editData.name"}}),e("q-select",{attrs:{outlined:"",options:t.options,"emit-value":!0,label:"分類"},model:{value:t.editData.class,callback:function(a){t.$set(t.editData,"class",a)},expression:"editData.class"}}),e("q-input",{staticClass:"text",attrs:{outlined:"",placeholder:"副標題"},model:{value:t.editData.subheading,callback:function(a){t.$set(t.editData,"subheading",a)},expression:"editData.subheading"}}),e("q-input",{staticClass:"text",attrs:{outlined:"",placeholder:"簡述"},model:{value:t.editData.intro,callback:function(a){t.$set(t.editData,"intro",a)},expression:"editData.intro"}}),e("q-input",{staticClass:"text",attrs:{prefix:"$",outlined:"",placeholder:"價格"},model:{value:t.editData.price,callback:function(a){t.$set(t.editData,"price",a)},expression:"editData.price"}}),e("q-input",{staticClass:"text",attrs:{type:"textarea",outlined:"",placeholder:"介紹"},model:{value:t.editData.description,callback:function(a){t.$set(t.editData,"description",a)},expression:"editData.description"}}),e("q-toggle",{attrs:{"checked-icon":"check",color:"green","unchecked-icon":"clear",label:"是否上架"},model:{value:t.editData.show,callback:function(a){t.$set(t.editData,"show",a)},expression:"editData.show"}})],1),e("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"取消"},on:{click:function(a){t.edit=!1}}}),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"送出"},on:{click:function(a){return t.update(t.editData)}}})],1)],1)],1)],1)},i=[],o=(e("e01a"),e("ddb0"),{inject:["upload","reload"],data(){return{columns:[{name:"img",field:"img",align:"center",label:"商品圖片"},{name:"upload",field:"upload",align:"center",label:"圖片上傳"},{name:"name",field:"name",align:"center",label:"名稱",sortable:!0,sort:(t,a)=>parseInt(t,10)-parseInt(a,10)},{name:"class",field:"class",align:"center",label:"分類",sortable:!0,sort:(t,a)=>parseInt(t,10)-parseInt(a,10)},{name:"price",field:"price",align:"center",label:"價格",sortable:!0,sort:(t,a)=>parseInt(t,10)-parseInt(a,10)},{name:"show",field:"show",align:"center",label:"是否上架",sortable:!0,sort:(t,a)=>parseInt(t,10)-parseInt(a,10)},{name:"action",field:"action",align:"center",label:"操作"}],data:[],add:!1,addData:{class:"",name:"",show:!0,subheading:"",intro:"",price:"",description:""},edit:!1,editData:{class:"",name:"",show:"",subheading:"",intro:"",price:"",description:""},options:[],model:""}},computed:{token(){return this.$store.getters.token}},methods:{editProduct(t){this.edit=!0,this.editData=t},update(t){this.$axios.patch("https://miniattic.herokuapp.com/products/"+t.item,{class:t.class,name:t.name,subheading:t.subheading,intro:t.intro,price:t.price,description:t.description,show:t.show},{headers:{Authorization:"Bearer "+this.token}}).then(t=>{this.reload(),alert(t.data.message)}).catch(t=>{alert(t.response.data.message)})},create(t){this.$axios.post("https://miniattic.herokuapp.com/products",{class:t.class,name:t.name,subheading:t.subheading,intro:t.intro,price:t.price,description:t.description,show:t.show},{headers:{Authorization:"Bearer "+this.token}}).then(t=>{this.reload(),alert(t.data.message)}).catch(t=>{alert(t.response.data.message)})},remove(t){this.$axios.delete("https://miniattic.herokuapp.com/products/"+t.item,{headers:{Authorization:"Bearer "+this.token}}).then(t=>{this.reload(),alert(t.data.message)}).catch(t=>{alert(t.response.data.message)})}},mounted(){this.$axios.get("https://miniattic.herokuapp.com/products").then(t=>{this.data=t.data.datas,this.data.map(t=>{t.src="https://miniattic.herokuapp.com/image/"+t.src})}).catch(t=>{console.log(t.response.data)}),this.$axios.get("https://miniattic.herokuapp.com/categorys").then(t=>{const a=t.data.datas;this.options=[];for(const e of a)this.options.push({label:e.name,value:e.item})}).catch(t=>{console.log(t.response.data)})}}),n=o,l=e("2877"),c=e("eaac"),r=e("2c91"),d=e("9c40"),p=e("bd08"),u=e("db86"),h=e("068f"),m=e("7d53"),b=e("0016"),f=e("58a81"),g=e("24e8"),k=e("f09f"),v=e("a370"),q=e("27f9"),x=e("ddd8"),D=e("9564"),w=e("4b7e"),$=e("7f67"),y=e("eebe"),C=e.n(y),_=Object(l["a"])(n,s,i,!1,null,null,null);a["default"]=_.exports;C()(_,"components",{QTable:c["a"],QSpace:r["a"],QBtn:d["a"],QTr:p["a"],QTd:u["a"],QImg:h["a"],QFile:m["a"],QIcon:b["a"],QBadge:f["a"],QDialog:g["a"],QCard:k["a"],QCardSection:v["a"],QInput:q["a"],QSelect:x["a"],QToggle:D["a"],QCardActions:w["a"]}),C()(_,"directives",{ClosePopup:$["a"]})}}]);